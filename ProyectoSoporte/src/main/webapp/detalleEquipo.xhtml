
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui"
				xmlns:c="http://java.sun.com/jsp/jstl/core"
				template="plantilla/plantilla.xhtml">

	<ui:define name="cuerpo">

		<f:metadata>
			<f:viewParam name="numSerie" value="#{detalleEquipoBean.equipo.numSerie}" required="true"/>
			<f:event type="preRenderView" listener="#{detalleEquipoBean.cargarDetalleEquipo}"/>
		</f:metadata>

		<h1 style="text-align: center"> Detalle del equipo #{detalleEquipoBean.equipo.nombre}</h1>

		<div class="contenedorDetalle">
		<div class="detalleDiv">

			<p:panelGrid styleClass="font panelInventario">

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Num de Serie:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.numSerie}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Procesador:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.procesador}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Memoria Ram:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.memoriaRam}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Disco Duro:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.discoDuro}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Sistema Operativo:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.sistOperativo}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Características:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.caracteristicas}" rendered="#{detalleEquipoBean.equipo.caracteristicas != null}"/>
						<h:outputText value="N/A" rendered="#{detalleEquipoBean.equipo.caracteristicas == null}" />
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Fecha de adquisición:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.fechaCompra}">
							<f:convertDateTime type="date" pattern="dd/MM/yyyy"/>
						</h:outputLabel>
					</p:column>
				</p:row>

			</p:panelGrid>

		</div>

		<div class="detalleDiv">
			<p:panelGrid styleClass="font panelInventario">

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Marca:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.modelo.marca.nombre}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Modelo:"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.modelo.nombre}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Estado:" />
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.equipo.estado.nombre}"/>
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="panelColumnaIzq">
						<h:outputLabel value="Usuario:" rendered="#{detalleEquipoBean.equipo.estado.nombre == 'Asignado'}"/>
					</p:column>
					<p:column styleClass="panelColumnaDer">
						<h:outputLabel value="#{detalleEquipoBean.usuario}" rendered="#{detalleEquipoBean.equipo.estado.nombre == 'Asignado'}"/>
					</p:column>
				</p:row>

			</p:panelGrid>

		</div>

		<div id="botonesGestion" class="detalleBotonesGestion">

			<p:panelGrid id="botones" styleClass="panelInventario botonesPanel" style="margin: 0 auto; font-size: small">
				<p:row>
					<p:column>
						<p:commandButton id="modificar" value="Modificar" />
					</p:column>
					<p:column>
						<p:commandButton id="cambioEstado" value="Cambiar estado" />
					</p:column>
					<p:column>
						<p:commandButton id="eliminar" value="Eliminar" />
					</p:column>
				</p:row>
			</p:panelGrid>

		</div>

		</div>

		<div>
			<h:form id="datatable">
				<p:dataTable id="Historial" var="item" value="#{detalleEquipoBean.historial}"
							 rows="15" paginator="true" rowsPerPageTemplate="10,15,25,50,100"
							 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							 widgetVar="itemTabla" emptyMessage="No se encontraron registros"
							 filteredValue="#{detalleEquipoBean.itemsBuscados}" tableStyle="table-layout: auto">

					<f:facet name="header">

						<p:panelGrid style="height: 30px" styleClass="panelInventario" >

							<p:row>
								<p:column>
									<p:outputLabel value="" style="font-size: medium; font-weight: bold;"/>
								</p:column>

								<p:column style="text-align: center">
									<p:outputLabel value="Historial" style="font-size: medium; font-weight: bold;"/>
								</p:column>
								<p:column>
									<p:inputText id="globalFilter" onkeyup="PF('itemTabla').filter()" style="width:150px; height: 30px; float: right;"/>
									<h:outputText value="Buscar: " style="float: right; font-size: small; display: inline; padding-top: 8px;"/>
								</p:column>
							</p:row>
						</p:panelGrid>

					</f:facet>

					<p:column headerText="Fecha" filterBy="#{item.fechaGestion}" filterStyle="display:none" >
						<h:outputText value="#{item.fechaGestion}">
						</h:outputText>
					</p:column>

					<p:column headerText="Tipo" filterBy="#{item.categoria.nombre}" filterStyle="display: none">
						<h:outputText value="#{item.categoria.nombre}"/>
					</p:column>

					<p:column headerText="Descripción" filterBy="#{item.descripcion}" filterStyle="display:none" >
						<h:outputText value="#{item.descripcion}"/>
					</p:column>

					<p:column headerText="Id incidencia" filterBy="#{item.idIncidencia}" filterStyle="display:none">
						<h:outputText value="#{item.idIncidencia}"/>
						<h:outputText value="N/A" rendered="#{item.idIncidencia == null}" />
					</p:column>

					<p:column headerText="Usuario" filterBy="#{item.usuarioAsignado}" filterStyle="display:none">
						<h:outputText value="#{item.usuarioAsignado}" rendered="#{item.usuarioAsignado != null}" />
						<h:outputText value="N/A" rendered="#{item.usuarioAsignado == null}" />
					</p:column>

					<p:column headerText="Responsable" filterBy="#{item.responsableSoporte}" filterStyle="display:none">
						<h:outputText value="#{item.responsableSoporte}" />
					</p:column>

				</p:dataTable>
			</h:form>
		</div>

	</ui:define>

</ui:composition>